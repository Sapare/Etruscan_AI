ideas = {

	economy = {
		law = yes
		undisturbed_isolation = {

			allowed = {
				always = no
			}
			
			available = {
			    if = {
					limit = { has_country_flag = GRI_junta_established }
					NOT = { has_completed_focus = GRI_the_war_economy }
				}
				if = {
					limit = { has_completed_focus = FEA_hermans_stratocracy }
					NOT = { has_completed_focus = FEA_retool_the_industrial_sector }
				}
				if = {
					limit = { has_completed_focus = FEA_rozenkamp_strasserists }
					NOT = { has_completed_focus = FEA_full_economic_mobilisation }
				}
			}
			removal_cost = -1

			modifier = {
				consumer_goods_factor = 0.50
				production_speed_industrial_complex_factor = -0.5
				production_speed_arms_factory_factor = -0.5
				production_speed_dockyard_factor = -0.5
				conversion_cost_civ_to_mil_factor = 0.5
				conversion_cost_mil_to_civ_factor = 0.5
				generate_wargoal_tension = 1.00
				join_faction_tension = 0.20
				lend_lease_tension = 0.50
				send_volunteers_tension = 0.20
				guarantee_tension = 0.75
				max_fuel_factor = -0.45
				fuel_gain_factor = -0.6
			}

			allowed_to_remove = {
				OR = {
					has_war_support > 0.5
					has_war = yes
				}
			}

			cancel_if_invalid = no
		}

		isolation = {

			allowed = {
				always = no
			}
			
			available = {
			    if = {
					limit = { has_country_flag = GRI_junta_established }
					NOT = { has_completed_focus = GRI_the_war_economy }
				}
				if = {
					limit = { has_completed_focus = FEA_hermans_stratocracy }
					NOT = { has_completed_focus = FEA_retool_the_industrial_sector }
				}
				if = {
					limit = { has_completed_focus = FEA_rozenkamp_strasserists }
					NOT = { has_completed_focus = FEA_full_economic_mobilisation }
				}
			}
			
			removal_cost = -1

			modifier = {
				consumer_goods_factor = 0.4
				production_speed_industrial_complex_factor = -0.4
				production_speed_arms_factory_factor = -0.4
				production_speed_dockyard_factor = -0.4
				conversion_cost_civ_to_mil_factor= 0.4
				conversion_cost_mil_to_civ_factor = 0.4
				generate_wargoal_tension = 1.00
				join_faction_tension = 0.20
				send_volunteers_tension = 0.20
				guarantee_tension = 0.5
				max_fuel_factor = -0.35
				fuel_gain_factor = -0.5
			}
			allowed_to_remove = {
				OR = {
					has_war_support > 0.75
					has_war = yes
				}
			}

			cancel_if_invalid = no
		}
		
		primitive_economy = {
            picture = tribal_economy
			allowed = {
				always = no
			}

			cost = 150
			removal_cost = -1

			modifier = {
				consumer_goods_factor = 0.40
				production_speed_industrial_complex_factor = -0.50
				production_speed_arms_factory_factor = -0.50
				conversion_cost_civ_to_mil_factor= 0.40
				conversion_cost_mil_to_civ_factor = 0.40
				production_speed_infrastructure_factor = -0.25
				production_speed_synthetic_refinery_factor = -0.25
				max_fuel_factor = -0.50
				fuel_gain_factor = -0.50
				local_resources_factor = 0.15
			}
			default = no

            allowed_to_remove = {
                always = no
            }
			cancel_if_invalid = no
		}
		
		outlaw_economy = {
            picture = outlaw_economy
			allowed = {
				always = no
			}

			cost = 150
			removal_cost = -1

			modifier = {
				consumer_goods_factor = 0.20
                fuel_gain_factor = 0.20
                industrial_capacity_factory = 0.20
                production_speed_industrial_complex_factor = -0.20
                production_speed_arms_factory_factor = -0.20
                conversion_cost_civ_to_mil_factor= -0.20
                conversion_cost_mil_to_civ_factor = 0.20
                political_power_gain = -0.20
                stability_factor = -0.20
			}
			default = no

            allowed_to_remove = {
                always = no
            }
			cancel_if_invalid = no
		}

		civilian_economy = {
    
			available = {
			    if = {
					limit = { has_country_flag = GRI_junta_established }
					NOT = { has_completed_focus = GRI_the_war_economy }
				}
				if = {
					limit = { 
					    OR = {
					        has_completed_focus = FEA_hermans_stratocracy 
							has_completed_focus = FEA_moldernik_the_leader
						}
					}
					NOT = { has_completed_focus = FEA_protect_the_markets }
				}
				if = {
					limit = { has_completed_focus = FEA_rozenkamp_strasserists }
					NOT = { has_completed_focus = FEA_full_economic_mobilisation }
				}
			}

			cost = 150
			removal_cost = -1

			modifier = {
				consumer_goods_factor = 0.35
				production_speed_industrial_complex_factor = -0.3
				production_speed_arms_factory_factor = -0.3
				conversion_cost_civ_to_mil_factor= 0.3
				conversion_cost_mil_to_civ_factor = 0.3
				production_speed_infrastructure_factor = 0.1
				production_speed_synthetic_refinery_factor = 0.05
				max_fuel_factor = -0.25
				fuel_gain_factor = -0.4
			}
			research_bonus = {
				industry = 0.03
				electronics = 0.025
			}
			default = yes

			cancel_if_invalid = no
		}

		low_economic_mobilisation = {

			available = {
			    if = {
					limit = { has_country_flag = GRI_junta_established }
					NOT = { has_completed_focus = GRI_the_war_economy }
				}
				if = {
					limit = { has_completed_focus = FEA_hermans_stratocracy }
					NOT = { has_completed_focus = FEA_retool_the_industrial_sector }
				}
				if = {
					limit = { has_completed_focus = FEA_rozenkamp_strasserists }
					NOT = { has_completed_focus = FEA_full_economic_mobilisation }
				}
				if = {
					limit = { has_completed_focus = GRI_griffenheim_square }
					NOT = { has_completed_focus = GRI_demilitarise_the_economy }
				}
				else = {
				has_war_support > 0.15
				OR = {
					has_government = fascism
					has_government = communism
					has_war = yes
					threat > 0.05
				    }
				}
				NOT = {
					has_country_flag = demilitarized
				}
			}

			cost = 150
			removal_cost = -1

			modifier = {
				consumer_goods_factor = 0.3
				production_speed_industrial_complex_factor = -0.1
				production_speed_arms_factory_factor = -0.1
				production_speed_infrastructure_factor = 0.05
				fuel_gain_factor = -0.25
			}
			research_bonus = {
				industry = 0.025
			}

			cancel_if_invalid = no

			ai_will_do = {
				factor = 5

				modifier = {
					factor = 2
					num_of_factories > 15
					}
					
				modifier = {
					factor = 2
					num_of_factories > 30
					}
					
				modifier = {
					factor = 2
					threat > 0.1
					}
					
				modifier = { 
					factor = 5
					any_neighbor_country = {
					has_added_tension_amount = 1
					}
					}
					
				modifier = {
					factor = 0
					num_of_factories < 5
					}
					
				modifier = {
				factor = 0.5
				NOT = {
				has_tech = basic_machine_tools
				}
				}
				
			modifier = {
				factor = 0.5
				NOT = {
				has_tech = construction1
				}
				}
				
			modifier = {
				factor = 0.5
				NOT = {
				has_tech = construction2
				}
				}
			
			modifier = {
				factor = 0.5
				NOT = {
				has_tech = electronic_mechanical_engineering
				}
				}
				
			modifier = {
				factor = 0.5
				NOT = {
				has_tech = mechanical_computing
				}
				}
				
				modifier = {
					factor = 0.5
				check_variable = { resource_imported@steel > 0 }
			}
		}
		}

		partial_economic_mobilisation = {

			available = {
				if = {
					limit = { has_country_flag = is_maresoc }
					has_country_flag = is_maresoc
				}
				if = {
					limit = { has_country_flag = GRI_junta_established }
					NOT = { has_completed_focus = GRI_the_war_economy }
				}
				if = {
					limit = { has_completed_focus = FEA_hermans_stratocracy }
					NOT = { has_completed_focus = FEA_retool_the_industrial_sector }
				}
				if = {
					limit = { has_completed_focus = FEA_rozenkamp_strasserists }
					NOT = { has_completed_focus = FEA_full_economic_mobilisation }
				}
				if = {
					limit = { has_completed_focus = GRI_griffenheim_square }
					NOT = { has_completed_focus = GRI_demilitarise_the_economy }
				}
				else = {
					has_war_support > 0.25
					OR = {
						has_government = fascism
						has_government = communism
						has_war = yes
						threat > 0.15
					}

					if = {
						limit = {
							tag = event_target:equestria
						}
						NOT = { has_country_flag = economic_laws_blocked }
					}
				}
				NOT = {
					has_country_flag = demilitarized
				}
				NOT = { has_country_flag = economic_laws_blocked }
			}

			cost = 150
			removal_cost = -1

			modifier = {
				consumer_goods_factor = 0.25
				production_speed_arms_factory_factor = 0.1
				conversion_cost_civ_to_mil_factor= -0.1
				conversion_cost_mil_to_civ_factor = -0.1
				fuel_gain_factor = -0.1
			}

			cancel_if_invalid = no

			ai_will_do = {
				factor = 5

				modifier = {
					factor = 2.5
					industrial_complex > 15
					}
					
				modifier = {
					factor = 2.5
					industrial_complex > 30
					}
				
				modifier = {
					factor = 2.5
					num_of_factories > 65
					}
					
				modifier = {
					factor = 0.5
					industrial_complex < 10
					}
					
				modifier = {
					factor = 10
					threat > 0.25
					}
					
				modifier = { 
					factor = 10
					any_neighbor_country = {
					has_added_tension_amount = 5
					}					
					}
								
				modifier = {
					factor = 0.5
					NOT = {
					has_tech = improved_machine_tools
					}
					}
								
				modifier = {
					factor = 0.5
					NOT = {
					has_tech = construction2
					}
					}
				
				modifier = {
					factor = 0.3
					check_variable = { resource_imported@steel > 0 }
					}			
					}
					}
	
		war_economy = {


			available = {
				if = {
					limit = { has_country_flag = is_maresoc }
					has_country_flag = is_maresoc
				}
				if = {
					limit = { has_completed_focus = GRI_griffenheim_square }
					NOT = { has_completed_focus = GRI_demilitarise_the_economy }
				}
				else = {
					has_war = yes
					has_war_support > 0.5
					if = {
						limit = {
							tag = event_target:equestria
						}
						NOT = { has_country_flag = economic_laws_blocked }
					}
					if = {
						limit = {
							original_tag = EQC
						}
						has_completed_focus = EQC_full_economic_commitment
					}
				}
				NOT = {
					has_country_flag = demilitarized
				}
				NOT = { has_country_flag = economic_laws_blocked }
				NOT = {
					has_country_flag = BAL_anarchy_laws
				}
			}

			cost = 150
			removal_cost = -1

			modifier = {
				consumer_goods_factor = 0.2
				production_speed_arms_factory_factor = 0.2
				conversion_cost_civ_to_mil_factor= -0.2
				conversion_cost_mil_to_civ_factor = -0.2
				political_power_gain = -0.20
			}

			cancel_if_invalid = no

			ai_will_do = {
				factor = 5

				modifier = {
					#High prio on production
					factor = 5
					manpower_per_military_factory >  1000
				}
								
				modifier = {
					factor = 2
					industrial_complex > 30
					}
					
				modifier = {
					factor = 2
					industrial_complex > 45
					}
				
				modifier = {
					factor = 2
					num_of_factories > 65
					}
					
				modifier = {
					factor = 0.5
					industrial_complex > 10
					}
					
				modifier = {
					factor = 0.5
					industrial_complex < 20
					}
					
				modifier = {
					factor = 0.5
					industrial_complex < 30
					}
				
				modifier = {
					factor = 0
					enemies_strength_ratio > 0.5
					}
				
				modifier = {
					factor = 2
					enemies_strength_ratio > 0.8
					}
					
				modifier = {
					factor = 5
					enemies_strength_ratio > 1.0
					}
					
				modifier = {
					factor = 0
					manpower < 10000
					}

				modifier = {
					factor = 0.2
					check_variable = { resource_imported@steel > 0 }
					}					
			}
		}

		tot_economic_mobilisation = {


			available = {
				if = {
					limit = { has_country_flag = is_maresoc }
					has_country_flag = is_maresoc
				}
				if = {
					limit = { has_completed_focus = GRI_griffenheim_square }
					NOT = { has_completed_focus = GRI_demilitarise_the_economy }
				}
				else = {
					has_war = yes
					threat > 0.2
					has_war_support > 0.8
					OR = {
						any_enemy_country = {
							ic_ratio = {
								tag = ROOT
								ratio > 0.5
							}
						}
						surrender_progress > 0.5
					}

					if = {
						limit = {
							tag = event_target:equestria
						}
						NOT = { has_country_flag = economic_laws_blocked }
					}
					if = {
						limit = {
							original_tag = EQC
						}
						has_completed_focus = EQC_full_economic_commitment
					}
				}
				NOT = {
					has_country_flag = demilitarized
				}
				NOT = { has_country_flag = economic_laws_blocked }
				NOT = {
					has_country_flag = BAL_anarchy_laws
				}
			}

			cost = 150
			removal_cost = -1

			modifier = {
				consumer_goods_factor = 0.10
				conscription = -0.03
				production_speed_arms_factory_factor = 0.3
				conversion_cost_civ_to_mil_factor= -0.3
				conversion_cost_mil_to_civ_factor = -0.3
				political_power_gain = -0.25
			}

			cancel_if_invalid = no
			
						ai_will_do = {
				factor = 10
					
				modifier = {
					factor = 0.5
					industrial_complex > 10
					}
					
				modifier = {
					factor = 0.5
					industrial_complex < 20
					}
					
				modifier = {
					factor = 0.5
					industrial_complex < 30
					}
				
				modifier = {
					factor = 0
					enemies_strength_ratio > 0.5
					}
				
				modifier = {
					factor = 0
					enemies_strength_ratio > 0.8
					}
					
				modifier = {
					factor = 0.5
					enemies_strength_ratio > 1.0
					}
				
				modifier = {
					factor = 5
					enemies_strength_ratio > 1.25
					}
				
				modifier = {
					factor = 5
					enemies_strength_ratio > 1.5
					}
					
				modifier = {
					factor = 5
					enemies_strength_ratio > 2.0
					}
					
				modifier = {
					factor = 0
					check_variable = { resource_imported@steel > 0 }
					}	
					
				modifier = {
					factor = 100
					has_equipment = { infantry_equipment < 100 }
					}
				
				modifier = {
					factor = 0
					has_equipment = { infantry_equipment > 1000 }
					}
					
				modifier = {
					#Block  unless nation has a lot of manpower
					factor = 0
					manpower_per_military_factory < 7000
				}


				modifier = {
					# never take this if we are on low conscription laws for safety
					factor = 0
					OR = {
						has_idea = volunteer_only
						has_idea = limited_conscription
					}
				}
			}
		}
	}

	trade_laws = {
		law = yes

		free_trade = {
			available = {
				NOT = { has_country_flag = trade_laws_blocked }
				if = {
					limit = { has_idea = EQC_SOL_autarky_idea }
					NOT = { has_idea = EQC_SOL_autarky_idea }
				}
				NOT = { has_country_flag = FLO_forced_limited }
				if = {
					limit = { 
					    OR = {
					        has_completed_focus = FEA_hermans_stratocracy 
							has_completed_focus = FEA_moldernik_the_leader
						}
					}
					NOT = { has_completed_focus = FEA_protect_the_markets }
				}
				if = {
					limit = { has_completed_focus = FEA_rozenkamp_strasserists }
					NOT = { has_completed_focus = FEA_state_controlled_economy }
				}
			}

			cost = 150
			removal_cost = -1

			modifier = {
				min_export = 0.8
				industrial_capacity_factory = 0.15
				industrial_capacity_dockyard = 0.15
				production_speed_buildings_factor = 0.15
				research_speed_factor = 0.10
				trade_opinion_factor = 0.3
			}

			cancel_if_invalid = no
			
			ai_will_do = {
				factor = 0
				
				#If overal consumption is less then 20% of your production, do.
				modifier = {
					ADD = 1000000
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				
				set_temp_variable = {resource_consum = resource_consumed@steel}
				add_to_temp_variable = { resource_consum = resource_consumed@chromium}
				add_to_temp_variable = { resource_consum = resource_consumed@crystals}
				add_to_temp_variable = { resource_consum = resource_consumed@rubber}
				add_to_temp_variable = { resource_consum = resource_consumed@aluminium}
				add_to_temp_variable = { resource_consum = resource_consumed@tungsten}
				
				
				divide_temp_variable = { resource_consum = resource_pro }
				check_variable = { resource_consum < 0.20 }
				}
				}
																
				#If any resource is more then 20% of your production, and 33% used, don't.
				modifier = {
					factor = 0
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@steel }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@steel }
				divide_temp_variable = { type_percentageb = resource_produced@steel}
				check_variable = { type_percentageb > 0.33 }
				}
				}
				
				modifier = {
					factor = 0
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@rystals }	
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				
				set_temp_variable = { type_percentageb =  resource_consumed@rystals }
				divide_temp_variable = { type_percentageb = resource_produced@rystals}
				check_variable = { type_percentageb > 0.33 }
				}
				}
								
				modifier = {
					factor = 0
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@rubber }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@rubber }
				divide_temp_variable = { type_percentageb = resource_produced@rubber}
				check_variable = { type_percentageb > 0.33 }
				}
				}
								
				modifier = {
					factor = 0
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
								
				set_temp_variable = { type_percentage =  resource_produced@aluminium }				
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@aluminium }	
				divide_temp_variable = { type_percentageb = resource_produced@aluminium}
				check_variable = { type_percentageb > 0.33}
				}
				}
								
				modifier = {
					factor = 0
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
										
				set_temp_variable = { type_percentage =  resource_produced@tungsten }				
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@tungsten }				
				divide_temp_variable = { type_percentageb = resource_produced@tungsten}
				check_variable = { type_percentageb > 0.33 }
				}
				}
								
				modifier = {
					factor = 0
					AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
										
				set_temp_variable = { type_percentage =  resource_produced@chromium }				
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@chromium }
				divide_temp_variable = { type_percentageb = resource_produced@chromium}
				check_variable = { type_percentageb > 0.33 }
				}
				}						
				}
				}

		export_focus = {
			available = { 
				NOT = { has_country_flag = TRD_forced_market } 
				NOT = { has_country_flag = trade_laws_blocked } 
				NOT = { has_country_flag = FLO_forced_limited }
				NOT = {
					OR = {
						has_completed_focus = YAL_clawnes
						has_completed_focus = YAL_hawk
					}
				}
				if = {
					limit = { 
					    OR = {
					        has_completed_focus = FEA_hermans_stratocracy 
							has_completed_focus = FEA_moldernik_the_leader
						}
					}
					NOT = { has_completed_focus = FEA_protect_the_markets }
				}
				if = {
					limit = { has_completed_focus = FEA_rozenkamp_strasserists }
					NOT = { has_completed_focus = FEA_state_controlled_economy }
				}
			}

			cost = 150
			removal_cost = -1

			modifier = {
				min_export = 0.5
				industrial_capacity_factory = 0.1
				industrial_capacity_dockyard = 0.1
				production_speed_buildings_factor = 0.1
				research_speed_factor = 0.05
			}

			default = yes

			cancel_if_invalid = no
			
			ai_will_do = {
				factor = 0
				
				#If your resource consuption is less then 50% of production, do.
				modifier = {
					ADD = 10000
				AND = {
				NOT = { has_idea = free_trade } 
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				
				set_temp_variable = {resource_consum = resource_consumed@steel}
				add_to_temp_variable = { resource_consum = resource_consumed@chromium}
				add_to_temp_variable = { resource_consum = resource_consumed@crystals}
				add_to_temp_variable = { resource_consum = resource_consumed@rubber}
				add_to_temp_variable = { resource_consum = resource_consumed@aluminium}
				add_to_temp_variable = { resource_consum = resource_consumed@tungsten}
				
				
				divide_temp_variable = { resource_consum = resource_pro }
				check_variable = { resource_consum < 0.50 }
				}
				}
				
				
			#If on free trade and you using 40% of a resource you depend on by 20%, go here.
			modifier = {
					ADD = 100000
				AND = {
				has_idea = free_trade
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@chromium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@chromium }
				divide_temp_variable = { type_percentageb = resource_produced@chromium}
				check_variable = { type_percentageb > 0.40 }
				}
				}
				
			modifier = {
					ADD = 100000
				AND = {
				has_idea = free_trade
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@steel }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@steel }
				divide_temp_variable = { type_percentageb = resource_produced@steel}
				check_variable = { type_percentageb > 0.40 }
				}
				}
				
			modifier = {
					ADD = 100000
				AND = {
				has_idea = free_trade
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@crystals }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@crystals }
				divide_temp_variable = { type_percentageb = resource_produced@crystals}
				check_variable = { type_percentageb > 0.40 }
				}
				}
				
			modifier = {
					ADD = 100000
				AND = {
				has_idea = free_trade
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@rubber }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@rubber }
				divide_temp_variable = { type_percentageb = resource_produced@rubber}
				check_variable = { type_percentageb > 0.40 }
				}
				}
				
			modifier = {
					ADD = 100000
				AND = {
				has_idea = free_trade
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@aluminium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@aluminium }
				divide_temp_variable = { type_percentageb = resource_produced@aluminium}
				check_variable = { type_percentageb > 0.40 }
				}
				}
				
			modifier = {
					ADD = 100000
				AND = {
				has_idea = free_trade
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
										
				set_temp_variable = { type_percentage =  resource_produced@tungsten }				
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@tungsten }				
				divide_temp_variable = { type_percentageb = resource_produced@tungsten}
				check_variable = { type_percentageb > 0.40 }
				}
				}
				
				#If on tighter economy, and you using 65% of a resource you depend on by 20%, dont.
			modifier = {
				factor = 0
				AND = {
				has_idea = limited_exports
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@chromium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@chromium }
				divide_temp_variable = { type_percentageb = resource_produced@chromium}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = limited_exports
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@steel }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@steel }
				divide_temp_variable = { type_percentageb = resource_produced@steel}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
					factor = 0
				AND = {
				has_idea = limited_exports
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
										
				set_temp_variable = { type_percentage =  resource_produced@tungsten }				
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@tungsten }				
				divide_temp_variable = { type_percentageb = resource_produced@tungsten}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = limited_exports
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@crystals }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@crystals }
				divide_temp_variable = { type_percentageb = resource_produced@crystals}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = limited_exports
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@rubber }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@rubber }
				divide_temp_variable = { type_percentageb = resource_produced@rubber}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = limited_exports
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@aluminium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@aluminium }
				divide_temp_variable = { type_percentageb = resource_produced@aluminium}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
				modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@chromium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@chromium }
				divide_temp_variable = { type_percentageb = resource_produced@chromium}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@steel }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@steel }
				divide_temp_variable = { type_percentageb = resource_produced@steel}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
					factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
										
				set_temp_variable = { type_percentage =  resource_produced@tungsten }				
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@tungsten }				
				divide_temp_variable = { type_percentageb = resource_produced@tungsten}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@crystals }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@crystals }
				divide_temp_variable = { type_percentageb = resource_produced@crystals}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@rubber }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@rubber }
				divide_temp_variable = { type_percentageb = resource_produced@rubber}
				check_variable = { type_percentageb > 0.55 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@aluminium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@aluminium }
				divide_temp_variable = { type_percentageb = resource_produced@aluminium}
				check_variable = { type_percentageb > 0.55 }
				}
				}												
			}
		}

		limited_exports = {

			available = {
				OR = {
					AND = {
						has_government = democratic
						has_war = yes
						any_enemy_country = {
							ic_ratio = {
								tag = ROOT
								ratio > 0.2
							}
						}
					}
					AND = {
						NOT = { has_government = democratic }
						OR = {
							has_idea = partial_economic_mobilisation
							has_idea = war_economy
							has_idea = tot_economic_mobilisation
						}
					}
				}
				NOT = { has_country_flag = TRD_forced_market }
				NOT = { has_country_flag = trade_laws_blocked }
				if = {
					limit = { has_completed_focus = GRI_griffenheim_square }
					NOT = { has_completed_focus = GRI_ensure_free_trade }
				}
			}

			cost = 150
			removal_cost = -1

			modifier = {
				min_export = 0.25
				industrial_capacity_factory = 0.05
				industrial_capacity_dockyard = 0.05
				production_speed_buildings_factor = 0.05
				research_speed_factor = 0.01
				trade_opinion_factor = -0.30
			}

			cancel_if_invalid = no

			ai_will_do = {
				factor = 0
				
			#If closed eco and your resource consuption is less then 100% of production, do.
				modifier = {
					ADD = 10000
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				
				set_temp_variable = {resource_consum = resource_consumed@steel}
				add_to_temp_variable = { resource_consum = resource_consumed@chromium}
				add_to_temp_variable = { resource_consum = resource_consumed@crystals}
				add_to_temp_variable = { resource_consum = resource_consumed@rubber}
				add_to_temp_variable = { resource_consum = resource_consumed@aluminium}
				add_to_temp_variable = { resource_consum = resource_consumed@tungsten}
				
				
				divide_temp_variable = { resource_consum = resource_pro }
				check_variable = { resource_consum < 1.00 }
				}
				}
				
				
				
				#If lax-eco and you using 70% of a resource you depend on by 20%, go here.
			modifier = {
					ADD = 10000
				AND = {
				NOT = { has_idea = closed_economy }
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@chromium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@chromium }
				divide_temp_variable = { type_percentageb = resource_produced@chromium}
				check_variable = { type_percentageb > 0.65 }
				}
				}
				
			modifier = {
					ADD = 10000
				AND = {
				NOT = { has_idea = closed_economy }
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@steel }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@steel }
				divide_temp_variable = { type_percentageb = resource_produced@steel}
				check_variable = { type_percentageb > 0.65 }
				}
				}
				
			modifier = {
					ADD = 10000
				AND = {
				NOT = {  has_idea = closed_economy }
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
										
				set_temp_variable = { type_percentage =  resource_produced@tungsten }				
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@tungsten }				
				divide_temp_variable = { type_percentageb = resource_produced@tungsten}
				check_variable = { type_percentageb > 0.65 }
				}
				}
				
			modifier = {
					ADD = 10000
				AND = {
				NOT = { has_idea = closed_economy }
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@crystals }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@crystals }
				divide_temp_variable = { type_percentageb = resource_produced@crystals}
				check_variable = { type_percentageb > 0.65 }
				}
				}
				
			modifier = {
					ADD = 10000
				AND = {
				NOT = { has_idea = closed_economy }
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@rubber }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@rubber }
				divide_temp_variable = { type_percentageb = resource_produced@rubber}
				check_variable = { type_percentageb > 0.65 }
				}
				}
				
			modifier = {
					ADD = 10000
				AND = {
				NOT = { has_idea = closed_economy }
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@aluminium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@aluminium }
				divide_temp_variable = { type_percentageb = resource_produced@aluminium}
				check_variable = { type_percentageb > 0.65 }
				}
				}
				
		#If on closed economy, and you using 85% of a resource you depend on by 20%, dont.
				
			modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@chromium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@chromium }
				divide_temp_variable = { type_percentageb = resource_produced@chromium}
				check_variable = { type_percentage > 0.85 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@steel }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@steel }
				divide_temp_variable = { type_percentageb = resource_produced@steel}
				check_variable = { type_percentageb > 0.85 }
				}
				}
				
				modifier = {
					factor = 0
				AND = {
				has_idea = closed_economy 
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
										
				set_temp_variable = { type_percentage =  resource_produced@tungsten }				
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@tungsten }				
				divide_temp_variable = { type_percentageb = resource_produced@tungsten}
				check_variable = { type_percentageb > 0.85 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@crystals }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@crystals }
				divide_temp_variable = { type_percentageb = resource_produced@crystals}
				check_variable = { type_percentageb > 0.85 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@rubber }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@rubber }
				divide_temp_variable = { type_percentageb = resource_produced@rubber}
				check_variable = { type_percentageb > 0.85 }
				}
				}
				
			modifier = {
				factor = 0
				AND = {
				has_idea = closed_economy
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@aluminium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@aluminium }
				divide_temp_variable = { type_percentageb = resource_produced@aluminium}
				check_variable = { type_percentageb > 0.85 }
				}
				}				
				}
				}
		

		closed_economy = {

			available = {
				has_war = yes
				OR = {
					has_government = fascism
					has_government = communism
				}
				OR = {
					has_idea = war_economy
					has_idea = tot_economic_mobilisation
				}
				NOT = { has_country_flag = TRD_forced_market }
				if = {
					limit = { has_completed_focus = GRI_griffenheim_square }
					NOT = { has_completed_focus = GRI_ensure_free_trade }
				}
			}

			cost = 150
			removal_cost = -1


			modifier = {
				min_export = 0
				trade_opinion_factor = -0.75
			}

			on_add = {
				custom_effect_tooltip = closed_economy_TT
			}

			cancel_if_invalid = no

			ai_will_do = {
				factor = 0
				
				#If you need 95% of any resource 20% of your economy, go here.
				modifier = {
					ADD = 10000
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@chromium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@chromium }
				divide_temp_variable = { type_percentageb = resource_produced@chromium}
				check_variable = { type_percentageb > 0.95 }
				}
				}
				
			modifier = {
					ADD = 10000
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@steel }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@steel }
				divide_temp_variable = { type_percentageb = resource_produced@steel}
				check_variable = { type_percentageb > 0.95 }
				}
				}
				
				modifier = {
					ADD = 10000
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
										
				set_temp_variable = { type_percentage =  resource_produced@tungsten }				
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@tungsten }				
				divide_temp_variable = { type_percentageb = resource_produced@tungsten}
				check_variable = { type_percentageb > 0.95 }
				}
				}
				
			modifier = {
					ADD = 10000
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@crystals }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb=  resource_consumed@crystals }
				divide_temp_variable = { type_percentageb = resource_produced@crystals}
				check_variable = { type_percentageb > 0.95 }
				}
				}
				
			modifier = {
					ADD = 10000
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@rubber }
				divide_temp_variable = { type_percentage= resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@rubber }
				divide_temp_variable = { type_percentageb = resource_produced@rubber}
				check_variable = { type_percentageb > 0.95 }
				}
				}
				
			modifier = {
					ADD = 10000
				AND = {
				set_temp_variable = {resource_pro = resource_produced@steel}
				add_to_temp_variable = { resource_pro = resource_produced@chromium}
				add_to_temp_variable = { resource_pro = resource_produced@crystals}
				add_to_temp_variable = { resource_pro = resource_produced@rubber}
				add_to_temp_variable = { resource_pro = resource_produced@aluminium}
				add_to_temp_variable = { resource_pro = resource_produced@tungsten}
				
				set_temp_variable = { type_percentage =  resource_produced@aluminium }
				divide_temp_variable = { type_percentage = resource_pro}				
				check_variable = { type_percentage > 0.20 }
				
				set_temp_variable = { type_percentageb =  resource_consumed@aluminium }
				divide_temp_variable = { type_percentageb = resource_produced@aluminium}
				check_variable = { type_percentageb > 0.95 }
				}
				}								
				}				
				}
		}
	}
